# SOCKET


* 이 디렉토리는 TLS방식을 모방한 암호화된 소켓통신을 할 수 있는 클라이언트와 서버를 제공합니다.
<hr>


## 프로젝트 설명


> * 이 프로젝트는 멀티스레드로 다수의 클라이언트가 채팅할 수 있는 채팅방 기능을 제공합니다.


> * 다수의 클라이언트는 서로 메시지를 전송하고 읽을 수 있습니다.


> * 클라이언트는 서버에 대칭키로 암호화된 메시지를 먼저 보냅니다.


> * 서버는 암호화된 메시지를 콘솔에 출력하고, 암호화된 상태로 다른 모든 클라이언트에게 데이터를 전송합니다.


> * 메시지를 받은 클라이언트는 공유된 대칭키로 데이터를 복호화하여 메시지를 읽을 수 있습니다.


## 프로젝트 실행 방법


* Server 디렉토리
> 1. 해당 디렉토리에서 make 명령어를 수행합니다.
> > 2. ./server port번호 형식으로 프로그램을 실행합니다. ex) ./server 99
> > > 3. 서버 콘솔에서는 키교환 과정 및, 클라이언트가 보낸 암호화된 데이터가 출력되는 것을 확인할 수 있습니다.
> > > > 4. make clean 명령어로 실행파일과 오브젝트 파일을 지울 수 있습니다.


* Client 디렉토리
> 1. 해당 디렉토리에서 make 명령어를 수행합니다.
> > 2. ./client serverIP serverPort nickname 형식으로 실행합니다. ex) ./client 127.0.0.1 99 ybkim
> > > * 이 프로젝트에서 서버 ip는 127.0.0.1로만 실행하시기 바랍니다.
> > > 3. 다른 클라이언트와 채팅을 수행할 수 있습니다.


* i_crypto_library
> * 원활한 채팅을 위해 기존 라이브러리에 i_enc, i_dec인터페이스에서 출력부분만 지웠습니다.
<hr/>


## 통신 과정에 대한 설명


> 1. 먼저 클라이언트는 RSA방식으로 자신만의 공개키와 개인키를 생성합니다.
> > 2. 클라이언트는 생성한 공개키를 서버에 전송합니다.
> > > 3. 서버는 클라이언트가 통신에 사용할 대칭키를 생성합니다.
> > > > 4. 서버는 클라이언트로부터 공개키를 획득합니다.
> > > > > 5. 서버는 해당 공개키로 대칭키를 암호화한 후 클라이언트에게 암호화된 대칭키를 전송합니다.
> > > > > > 6. 클라이언트는 암호화된 대칭키를 개인키로 복호화하여 대칭키를 얻습니다.
> > > > > > > 7. 클라이언트들은 이 대칭키를 이용해 메시지를 암호화해서 전송 및, 받은 메시지를 복호화합니다.
<hr/>


## 주의사항


* 이 코드에서 대칭키, 그리고 rsa 키쌍은 소스코드에 그대로 붙여놨습니다.
* 실제로는 db나 파일에 저장하는 것이 안전하지만 코드 실행 편의상 소스에 키를 적어놨습니다.
<hr/>


### Thank You For Reading Me!!!
